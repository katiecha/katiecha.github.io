YUI.add("hermes-lang-photo-page",(function(e,t){e.Intl.add("hermes/photo-page","en-US",{WELCOME_MSG_1:[{type:0,value:"Welcome to the new Flickr photo page! We’ve been working hard on updating the photo viewing experience, and wanted to give you a preview of what we will be launching later this year. You may notice that some features are missing; we haven’t forgotten about them, and they will be appearing soon."}],WELCOME_MSG_2:[{type:0,value:"We want your feedback. If you have any comments, find any bugs, or simply want to go back to the old photo page, please click on the “Help &amp; Feedback” button on the bottom left of this page. Thanks for trying the new photo page and helping us improve Flickr!"}],WELCOME_MSG_TITLE:[{type:0,value:"Welcome to the new photo page!"}],WELCOME_MSG_CONFIRM_BUTTON:[{type:0,value:"Got it!"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("galleries-route",(function(e){var l=require("hermes-core/type-validator"),t=50,i=100;function a(e){a.superclass.constructor.call(this,e)}e.Routes[this.name]=a,e.extend(a,e.FlickrRoute,{langBundles:this.details.langBundles,run:function(a){var s,r,o=this,n=a.params.nsid_or_path_alias,g={},p=a.params&&a.params.gallery_id,u=p?i:25,d={page:1,perPage:u,withGalleryId:p},m="/photos/"+n+"/galleries/",c=a.geo;return r=this.getPageNumber(a),d.page=i/u*(r-1)+1,l.nsid(n)?g.id=n:g.pathAlias=n,e.Promise.all([this.appContext.getModel("person-models",g),this.appContext.getModelRegistry("person-galleries-models").then((function(e){return e.removeAll(),e.get(g,d)}))]).then((function(a){var g;if(o.personModel=a[0],o.galleriesModel=a[1],p){if(g=o.galleriesModel.getValue("galleriesList"),-1===(s=g.getPageOf({id:p},t))||g.getNextIncompletePage(d)===s)return d.forceAPICall=!0,l.nsid(n)?d.id=n:d.pathAlias=n,g.getPage(d).then((function(e){return r=Math.ceil(g.getPageOf({id:p},t)*t/i),s=r,o.onRouteResolved(s,m,p,r,c)}),(function(l){return e.Promise.resolve({redirect:m})}));r=Math.ceil(s*t/i),s=r}else s=2*(r-1)+1;return o.onRouteResolved(s,m,p,r,c)})).catch((function(l){return o.displayRouteErrors(a,new e.RouteError(404,o.intlMessage({intlName:"common.404_PROFILE_NONEXISTENT"})))}))},onRouteResolved:function(l,a,s,r,o){var n={view:"galleries-list-page-view",title:"en-US"===this.appContext.lang?this.intlMessage({intlName:"common.USERS_GALLERIES",who:this.personModel.getValue("displayname")}):this.intlMessage({intlName:"common.GALLERIES"}),params:{nsid:this.galleriesModel.getValue("id"),pageParams:{page:l>0?l:1,perPage:s?i:t,viewPageSize:i,nominalPage:r>0?r:1},baseURL:a,isEmpty:0===this.galleriesModel.getValue("galleriesList").size(),withGalleryId:s,geo:o}};return e.Promise.resolve(n)}}),e.mix(a.prototype,e.Localizable)}),"@VERSION@",{requires:["flickr-route","flickr-promise","galleries-list-page-view","galleries-in-list-page-view","empty-page-view","person-models","person-galleries-models"],optionalRequires:["hermes-core"],langBundles:["common"]});